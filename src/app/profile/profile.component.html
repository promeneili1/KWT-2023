<div class="container">
  <div class="account-settings">
    <div class="user-profile">
      <div class="user-avatar"></div>
      <div class="user-info">
        <h5 class="user-name">{{ user.displayName }}</h5>
        <h6 class="user-email">{{ user.email }}</h6>
        <div *ngIf="user.description">
          <p>{{ user.description }}</p>
        </div>

        <button
          type="button"
          class="btn btn-primary"
          (click)="toggleEditForm()"
        >
          Edit
        </button>
      </div>
    </div>

    <form
      *ngIf="showEditForm"
      (ngSubmit)="updateProfile()"
      #profileForm="ngForm"
    >
      <div class="form-group">
        <label for="displayName"> name</label>
        <input
          type="text"
          class="form-control"
          id="displayName"
          name="displayName"
          [(ngModel)]="user.displayName"
          required
        />
      </div>
      <div class="form-group">
        <label for="email">Email</label>
        <input
          type="email"
          class="form-control"
          id="email"
          name="email"
          [(ngModel)]="user.email"
          required
        />
      </div>
      <div class="form-group">
        <label for="firstName">First Name</label>
        <input
          type="text"
          class="form-control"
          id="firstName"
          name="firstName"
          [(ngModel)]="user.firstName"
          required
        />
      </div>
      <div class="form-group">
        <label for="lastName">Last Name</label>
        <input
          type="text"
          class="form-control"
          id="lastName"
          name="lastName"
          [(ngModel)]="user.lastName"
          required
        />
      </div>
      <div class="form-group">
        <label for="description">Description</label>
        <textarea
          class="form-control"
          id="description"
          name="description"
          [(ngModel)]="user.description"
        ></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Update Profile</button>
    </form>

    <div class="passwordFormBtn">
      <button
        type="button"
        class="btn btn-primary"
        (click)="togglePasswordForm()"
      >
        change password
      </button>
    </div>

    <form *ngIf="showPasswordForm" (ngSubmit)="savePasswordChange()">
      <div class="form-group">
        <label for="oldPassword">Old Password</label>
        <input
          type="password"
          class="form-control"
          id="oldPassword"
          placeholder="Enter old password"
          [(ngModel)]="oldPassword"
          name="oldPassword"
        />
      </div>
      <div class="form-group">
        <label for="newPassword">New Password</label>
        <input
          type="password"
          class="form-control"
          id="newPassword"
          placeholder="Enter new password"
          [(ngModel)]="newPassword"
          name="newPassword"
        />
      </div>
      <div class="form-group">
        <label for="confirmNewPassword">confirm new password</label>
        <input
          type="password"
          class="form-control"
          id="confirmNewPassword"
          placeholder="Confirm new password"
          [(ngModel)]="confirmNewPassword"
          name="confirmNewPassword"
        />
      </div>
      <div class="text-right">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="cancelPasswordChange()"
        >
          Cancel
        </button>
        <button type="submit" class="btn btn-primary">save changes</button>
      </div>
    </form>

    <ul>
      <li *ngFor="let group of groups">
        <h3>
          <a routerLink="/groups/{{ group.id }}/posts">{{ group.name }}</a>
        </h3>
        <p>{{ group.description }}</p>
      </li>
    </ul>
  </div>
</div>
